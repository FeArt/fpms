<section data-ng-controller="AppsController" ng-init="findOne()">
    <div class="pull-right" data-ng-show="(authentication.user)">
        <a title="返回" class="btn btn-primary btn-sm" data-ng-click="back();">
            <i class="glyphicon glyphicon-arrow-left"></i>
        </a>
        <a title="设置" class="btn btn-primary btn-sm" href="/#!/apps/{{app._id}}/edit" data-ng-show="(authentication.user._id == app.user._id)">
            <i class="glyphicon glyphicon-edit"></i>
        </a>
        <a title="删除" class="btn btn-primary btn-sm" data-ng-click="remove();"
           data-ng-show="(authentication.user._id == app.user._id)" my-confirm-click="您确定要删除吗？">
            <i class="glyphicon glyphicon-trash"></i>
        </a>
    </div>
	<div class="page-header">
		<h1 data-ng-bind="app.name"></h1>
	</div>
    <div class="panel panel-info">
        <div class="panel-heading">请复制以下代码到您需采集数据的所属页面html代码的body底部：</div>
        <div class="panel-body">
            {{script}}
        </div>
    </div>
    <div class="panel panel-success">
        <div class="panel-heading">应用总体概况</div>
        <div class="panel-body">
            目前{{app.name}}的{{pagesNum}}个页面正在进行监控。
            <div data-ng-show="showChart">
                <div class="form-group">
                    <label class="control-label">页面：</label>
                    <button class="btn btn-default" name="selectPage" data-ng-model="selectPage" placeholder="暂无监控页面"
                            ng-options="page.pathname for page in pages" bs-select ng-disabled="!showChart">
                    </button>
                    <label class="control-label">日期范围：</label>
                    <input class="btn btn-default" ng-model="fromDate" data-max-date="{{untilDate}}" placeholder="开始日期"
                           bs-datepicker type="text" ng-disabled="!showChart">
                    至
                    <input class="btn btn-default" ng-model="untilDate" data-min-date="{{fromDate}}" data-max-date="{{nowDate}}"
                           placeholder="截止日期" bs-datepicker type="text" ng-disabled="!showChart">
                    <input type="button" value="刷新" class="btn btn-success" ng-click="refrashChart()" ng-disabled="!showChart">
                </div>
                <div class="row">
                    <div class="col-lg-3">
                        <div class="alert alert-warning">
                            平均总耗时
                            <div class="large">
                                {{statisticData.pageLoad}} ms
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="alert alert-warning">
                            平均网络耗时
                            <div class="large">
                                {{statisticData.network}} ms
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="alert alert-warning">
                            平均后端耗时
                            <div class="large">
                                {{statisticData.backend}} ms
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="alert alert-warning">
                            平均前端耗时
                            <div class="large">
                                {{statisticData.frontend}} ms
                            </div>
                        </div>
                    </div>
                </div>
                <highchart config="chartConfig"></highchart>
            </div>
        </div>
    </div>
	<small>
		<em class="text-muted">
			由
			<span data-ng-bind="app.user.displayName"></span>
			创建于
			<span data-ng-bind="app.created | date:'yyyy-MM-dd HH:mm:ss'"></span>
		</em>
	</small>
</section>
